<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>TRON dApp ‚Äî 25 TRX</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 40px;
        }
        button {
            padding: 12px 20px;
            font-size: 16px;
            cursor: pointer;
        }
        pre {
            margin-top: 20px;
            background: #f4f4f4;
            padding: 15px;
        }
    </style>
</head>
<body>

<h2>TRON dApp</h2>

<button onclick="connectAndSend()">–ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª—ë–∫ –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å 25 TRX</button>

<pre id="status">–û–∂–∏–¥–∞–Ω–∏–µ...</pre>

<script>
    const RECEIVER_ADDRESS = "TXXXXXXXXXXXXXXXXXXXXXXXXXXXX"; // ‚Üê –∞–¥—Ä–µ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è
    const AMOUNT_TRX = 25;

    function waitForTronWeb() {
        return new Promise((resolve, reject) => {
            let attempts = 0;

            const timer = setInterval(() => {
                if (window.tronWeb && window.tronWeb.ready) {
                    clearInterval(timer);
                    resolve(window.tronWeb);
                }

                attempts++;
                if (attempts > 20) {
                    clearInterval(timer);
                    reject("TronLink –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –∫–æ—à–µ–ª—ë–∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω");
                }
            }, 500);
        });
    }

    async function connectAndSend() {
        const status = document.getElementById("status");
        status.textContent = "üîç –ü–æ–∏—Å–∫ TronLink...";

        try {
            const tronWeb = await waitForTronWeb();

            const from = tronWeb.defaultAddress.base58;
            status.textContent = "‚úÖ –ö–æ—à–µ–ª—ë–∫ –ø–æ–¥–∫–ª—é—á—ë–Ω:\n" + from;

            const tx = await tronWeb.trx.sendTransaction(
                RECEIVER_ADDRESS,
                AMOUNT_TRX * 1_000_000
            );

            status.textContent += "\n\nüöÄ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞\nTX ID:\n" + tx.txid;

        } catch (e) {
            status.textContent = "‚ùå –û—à–∏–±–∫–∞:\n" + e;
        }
    }
</script>

</body>
</html>
